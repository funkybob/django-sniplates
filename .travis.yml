sudo: false
language: python
install:
  - pip install coverage codecov coveralls tox
  - pip install git+https://github.com/nedbat/django_coverage_plugin.git@master
addons:
  apt:
    sources:
      - deadsnakes
    packages:
      - python3.5
script:
  - tox
after_success:
  # the settings module env var is required for coverage report generation only
  - export DJANGO_SETTINGS_MODULE=tests.report_settings PYTHONPATH=.
  - codecov
  - coveralls
env:
  - TOXENV=py27-django111
  - TOXENV=py34-django111
  - TOXENV=py35-django111
  - TOXENV=pypy-django111
  - TOXENV=pypy3-django111

  - TOXENV=py34-django20
  - TOXENV=py35-django20
  - TOXENV=py36-django20
  - TOXENV=py37-django20
  - TOXENV=pypy3-django20

  - TOXENV=py35-django21
  - TOXENV=py36-django21
  - TOXENV=py37-django21
  - TOXENV=pypy3-django21
